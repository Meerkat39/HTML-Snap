# AI エージェント ガイドライン

# GitHub Copilot 利用規約・運用ガイドライン

このドキュメントは、HTML Snap プロジェクトにおける GitHub Copilot や AI 活用の運用ルール・推奨事項をまとめます。

---

## 基本方針

- AI は「サポート役」として活用し、最終的な判断・責任は人間が持つ
- 生成コードには必ず日本語コメントを付与し、意図や処理内容を明確化する
- 仕様書（docs/features.md など）を必ず参照し、仕様逸脱を防ぐ
- 機能ごとにブランチを切り、段階的に実装・レビュー・マージする
- 学びや気づきは learning_notes/ に記録・共有する

## コード生成・編集ルール

- 一度に大量のコードを生成せず、最小単位で段階的に作成・確認する
- 既存コードのリファクタリングや改善提案も積極的に活用する
- セキュリティ・パフォーマンス・可読性を意識した提案を優先する

## プロンプト・指示の書き方

- 目的・背景・要件を明確に伝える
- 画面構成や UI イメージはテキストや図で具体的に説明する
- 追加・修正したい点は箇条書きやチェックリストで整理する

## Git 管理運用ルール

- 機能・修正ごとに必ずブランチを分けて作業する（例: feature/snap-upload, fix/layout-bug など）
- コミットメッセージは日本語で「何を・なぜ」明確に記載する
- PR（プルリクエスト）は小さな単位で出し、内容・意図・動作確認方法を説明する
- main ブランチは常にデプロイ可能な状態を維持する
- 1 人開発の場合も PR 運用を活用し、履歴・議論を残す
- 不要なブランチは定期的に削除する
- コミット前に必ずテスト・lint・ビルド確認を行う
- .github/配下に運用ルールやテンプレートを管理する

### コミットメッセージ運用例

- 先頭に種別（prefix）を付けることで履歴が分かりやすくなります。
	- `feat:` 機能追加・変更
	- `fix:` バグ修正
	- `docs:` ドキュメント修正・追加
	- `refactor:` リファクタリング
	- `test:` テスト追加・修正
	- `chore:` その他の雑務・設定変更
- 例：
	- `feat: Snap機能のAPI連携処理を追加`
	- `fix: レイアウト崩れを修正`
	- `docs: Copilot運用規約を追記`
	- `refactor: 型定義を共通化し保守性向上`
	- `test: 正常系・異常系のテスト追加`

種別＋内容＋理由（必要に応じて）を日本語で簡潔に記載してください。

## 実装方針（ディレクトリ設計・責務分離）

- UI は役割ごとにコンポーネントとして分割・管理する（例: src/components/Header.tsx など）
- ビジネスロジックや汎用関数は lib/ にまとめ、UI から独立させる（例: src/lib/htmlParser.ts など）
- 型定義は types/ に分離し、型安全・再利用性・自動補完を高める（例: src/types/snap.ts など）
- ディレクトリごとに「何を管理するか」を明確化し、命名規則や README を活用して迷わない設計を心がける

## テスト運用方針

- 単体テスト（Jest, React Testing Library）・結合テスト・E2E テスト（Cypress/Playwright）を使い分ける
- 生成コードには必ずテストコードもセットで提案・実装する
- テストケースは「正常系・異常系・境界値」を意識し、網羅性・保守性を高める
- テスト名・ファイル名は何を検証するか分かりやすく記載する
- テスト実行・CI 連携（GitHub Actions 等）も運用ルールに含める
- AI 活用時も「テスト観点・テストコード生成」を明示的に指示する

#### 例

- `src/components/__tests__/Header.test.tsx` … ヘッダー UI の単体テスト
- `src/lib/__tests__/htmlParser.test.ts` … ロジックの単体テスト
- `e2e/snap-flow.spec.ts` … 画面遷移・主要フローの E2E テスト

テストコードの粒度・命名・運用例も随時追記してください。

## TODO 管理運用方針

- `docs/project-todo.md` で「どの機能をやっているか」を機能単位で管理します（features.md と連動）。
- `docs/implementation-todo.md` で「実装レベルでどこをやっているか」を細かいタスク・進捗単位で管理します。
- 機能ごと・実装ごとにチェックリスト形式で進捗を可視化し、抜け漏れ防止・レビュー効率化を図ります。
- 仕様変更や追加要件があれば、両 TODO を随時更新し、運用ルール・履歴も残します。